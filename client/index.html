<html>
<head>
<script language="javascript" src="http://jqueryjs.googlecode.com/files/jquery-1.2.6.js"></script>
<script language="javascript" src="http://www.json.org/json2.js"></script>
<script language="javascript" src="JSORB.js"></script>
<script language="javascript">

$(document).ready(function () {
    $("#status").ajaxError(function(event, request, settings, error) {
        $(this).val("Error requesting page " + settings.url);
        if (error) {
            $('#output').val("Exception was thrown: " + error);
        }
        else {
            $('#output').val(request.responseText);
        }
    });    
})

function load_test () {
    var req = new JSORB.Client.Request ({
        id     : 1,
        method : $("#method").val(),
        params : $("#params").val()        
    });
    
    $.get(
        
        req.as_url('http://localhost:8080/'),
        
        function (data, text_status) {
            
            var resp = new JSORB.Client.Response(data);
            
            $("#status").val(text_status);
            $("#output").val( resp.as_json() );            
        }
    );
}

</script>
</head>
<body>
<h1>JSORB Testing Client</h1>
<hr/>
<form onsubmit="return false;">
method:<input type="text" value="" name="method" id="method" /><br/>
params:<input type="text" value="" name="params" id="params" /><br/>
<input type="submit" value="Go" onclick="load_test()" />
</form>
<hr/>
<label for="status">status</label><br/>
<input type="text" size="82" name="status" id="status"/><br/>
<label for="output">output</label><br/>
<textarea rows="20" cols="80" name="output" id="output"></textarea>
<hr/>
</body>
</html>